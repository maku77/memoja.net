---
title: "EasyLanguage: レーダースクリーン用のインジケーターを作成する"
linkTitle: "レーダースクリーン用のインジケーターを作成する"
url: "/p/ct3bjry"
date: "2020-05-03"
tags: ["EasyLanguage"]
weight: 100
---

インジケーターの新規作成
----

レーダースクリーン用のインジケーターを新しく作成するには、トレードステーション開発環境のメニューから、 __`ファイル` → `新規作成` → `インジケーター`__ と辿ります。

インジケーターは、デフォルトでは「チャート分析」ウィンドウと、「レーダースクリーン」ウィンドウの両方に適用できるように設定されています（`Plot1` や `Plot2` で出力した値がどちらのウィンドウでも使われます）。
インジケーターを「レーダースクリーン」専用にするには、新規作成ダイアログで、下記のように「チャート分析」のチェックボックスを外します。

{{< image border="true" src="img-001.png" >}}

このようにインジケーターを作成すると、「レーダースクリーン」をアクティブにして分析テクニックを挿入するときだけ、インジケーターがリストに表示されるようになります。


レーダースクリーン用のインジケーター実装サンプル
----

ここでは、下の図のように、レーダースクリーン上に 4 つの指標（`指標1` 〜 `指標4`）を表示するインジケーターを作成してみます。

{{< image border="true" src="img-002.png" >}}

{{< code title="!TestRader" >}}
once begin
    // テキスト色
    SetPlotColor(1, Cyan);
    SetPlotColor(2, Red);
    SetPlotColor(3, White);
    SetPlotColor(4, White);

    // 背景色
    SetPlotBgColor(1, DarkBlue);
    SetPlotBgColor(2, DarkRed);
    SetPlotBgColor(3, Black);
    SetPlotBgColor(4, RGB(50, 80, 50));
end;

once (LastBarOnChart) begin
    Plot1(100, "指標1");
    Plot2(200, "指標2");
    Plot3("買い？", "指標3");
    Plot4("売りでしょ", "指標3");
end;
{{< /code >}}

各セルのテキスト色や背景色は、__`SetPlotColor`__ および __`SetPlotBgColor`__ で設定することができます。
上記では、`once begin` でインジケーターのアタッチ時に一度だけ色設定しているので、全ての銘柄で同じ色になっていますが、本来は、何らかのシグナルが発生しているときにハイライト表示すると分かりやすいです。

セルに表示する値は、チャート分析のインジケーター同様、__`Plot1`__ や __`Plot2`__ を使用します。
第 1 引数で表示する値を指定するのですが、ここには数字だけでなく、文字列を指定することもできます。
第 2 引数には、カラム名として表示される文字列を指定します。
省略することもできますが、その場合は `Plot1`、`Plot2` のように意味不明なカラム名になってしまうので、必ず指定するようにしましょう。

コードを保存して、`F3` キーでコンパイルすれば完成です。


レーダースクリーンに追加する
----

作成したインジケーターをレーダースクリーンに適用するには、レーダースクリーンをアクティブにした状態で、下記のような方法で追加ダイアログを開きます。

* `Alt + C` ホットキー
* `.iat <Enter>` コマンド
* 右クリック → `すべての分析テクニックを設定`
* メニューから `挿入` → `インジケーター`

{{< image border="true" src="img-003.png" >}}

左側のリストから挿入したいインジケーターを選択し、`追加` ボタンを押せば OK です。
逆に、必要のないインジケーターをこのダイアログでまとめて削除することもできます。

